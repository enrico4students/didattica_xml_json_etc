<html>
<head>
<title>Esercitazione per gli studenti</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body bgcolor="#FFFFFF">
<p><font color="#0000FF"><a href="contaAccessi.php"><img src="../images/execute.gif" width="44" height="32" border="0" align="right"></a><a href="index.html"><img src="../images/return.gif" width="41" height="30" align="right" border="0"></a></font></p>
<h3><font color="#006600">Codice sorgente del file contaAccessi.php</font></h3>
<pre><font color="#0000FF">&lt;?php
  <font color="#009900">$nomefile</font> = &quot;accessi.txt&quot;;   <font color="#0099FF"><em> // nome del file dove viene memorizzato il totale accessi</em></font><br>  if (<font color="#FF0000">file_exists</font>(<font color="#009900">$nomefile</font>))   <font color="#0099FF"><em>// verifica dell'esistenza del file</em></font><br>  { <br>    <font color="#009900">$idfile</font> = <font color="#FF0000">fopen</font>(<font color="#009900">$nomefile</font>, &quot;r+&quot;);   <font color="#0099FF"><em>// se esiste gia viene aperto in lettura</em></font><br><em><font color="#0099FF">    // se non si riesce ad aprirlo viene creato un messaggio di errore<br></font></em>    if (!<font color="#009900">$idfile</font>) die (<font color="#009900">$msg</font> = &quot;<font color="#000000">il file &amp;nomefile non &egrave; stato aperto &lt;BR&gt;</font>&quot;);<br><em><font color="#0099FF">    // se il file viene aperto si leggono dieci caratteri e messi in $conta_accessi</font></em><br>    <font color="#009900">$conta_accessi</font> = (int)<font color="#FF0000">fread</font>(<font color="#009900">$idfile</font>, 10);     <font color="#0099FF"><em>// il casting da stringa in intero</em></font><br>    fclose(<font color="#009900">$idfile</font>);                             <font color="#0099FF"><em> // chiusura file</em></font><br>  }<br>  else<br>  { <br><em><font color="#0099FF">    // se il file non esiste viene creato e aperto contemporaneamente<br></font></em>    $idfile = <font color="#FF0000">fopen</font>(<font color="#009900">$nomefile</font>, &quot;w+&quot;);      <br>    if (!<font color="#009900">$idfile</font>) die (<font color="#009900">$msg</font> = &quot;<font color="#000000">il file &amp;nomefile non &egrave; stato aperto&lt;BR&gt;</font>&quot;); <br> <font color="#0099FF"><em>   // se il file viene aperto correttamente </em></font><br>   <font color="#009900">$conta_accessi</font> = 0;                   <font color="#0099FF"><em>// si inizializza la variabile conta_accessi</em></font><br>    <font color="#FF0000">fclose</font>(<font color="#009900">$idfile</font>);                     <font color="#0099FF"><em> // chiusura del file</em></font><br>  } <br>  <br>  <font color="#009900">$conta_accessi</font>++;                       <font color="#0099FF"><em>// incremento del contatore di accessi </em></font> <br>  <font color="#009900">$idfile</font> = <font color="#FF0000">fopen</font>(<font color="#009900">$nomefile</font>, &quot;w+&quot;);      <font color="#0099FF"><em> // apertura del file in scrittura </em></font>    <br>  if (!<font color="#009900">$idfile</font>) die (<font color="#009900">$msg</font> = &quot;<font color="#000000">il file &amp;nomefile non &egrave; stato aperto&lt;BR&gt;</font>&quot;); <br>  <br><em><font color="#0099FF">  // se il file aperto correttamente si scrive nel file del contatore di accessi</font></em><br>  fwrite(<font color="#009900">$idfile</font>, <font color="#009900">$conta_accessi</font>);  <br>  fclose(<font color="#009900">$idfile</font>);                        <font color="#0099FF"><em>// chiusura file</em></font><br>  echo(<font color="#009900">$conta_accessi</font>);                 <font color="#0099FF"><em>  // visualizza il contatore accessi </em></font> </font></pre>
<p>   <font color="#0000FF">?&gt;
</font></p>
<p>&nbsp;</p>
<p>&nbsp;     </p>
</body>
</html>

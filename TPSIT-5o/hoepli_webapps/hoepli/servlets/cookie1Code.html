<html>
<head>
<title>Esercitazionde per gli studenti</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body bgcolor="#FFFFFF">
<pre><font color="#0000FF"><a href="servlet/Dafare"><img src="images/execute.gif" align="right" border="0"></a><a href="index.html"><img src="images/return.gif" width="24" height="24" align="right" border="0"></a></font></pre>
<pre><font color="#006600">Codice sorgente classe Cookie1.java</font></pre>
<pre><font color="#0000FF">import</font> java.io.*;
<font color="#0000FF">import</font> javax.servlet.*;
<font color="#0000FF">import</font> javax.servlet.http.*;
<font color="#0000FF">import</font> java.io.IOException;<br><font color="#0000FF">import</font> java.io.PrintWriter;<br><font color="#0000FF">import</font> java.util.ResourceBundle;</pre>
<pre><font color="#0000FF">import</font> javax.servlet.ServletException;
<font color="#0000FF">import</font> javax.servlet.http.Cookie;
<font color="#0000FF">import</font> javax.servlet.http.HttpServlet;
<font color="#0000FF">import</font> javax.servlet.http.HttpServletRequest;
<font color="#0000FF">import</font> javax.servlet.http.HttpServletResponse;</pre>
<pre><font color="#0000FF">public class</font> <font color="#FF0000">Cookie1<font color="#0000FF"> </font></font><font color="#0000FF">extends</font> HttpServlet 
{
 public void doGet(HttpServletRequest request,HttpServletResponse response)
   throws IOException, ServletException
   {
   String title = &quot;Primo esempio con i cookies&quot;;
   String nomeCookie = request.getParameter(&quot;nomeCookie&quot;);
   String valoreCookie = request.getParameter(&quot;valoreCookie&quot;);
   Cookie aCookie = null;
   
   // controlla i parametri passati dal metodo doPost a doGet 
   if (nomeCookie != null &amp;&amp; valoreCookie != null) {
   aCookie = new Cookie(nomeCookie, valoreCookie);
   response.addCookie(aCookie);
   }</pre>
<pre>   // creazione pagina HTML 
   response.setContentType(&quot;text/html&quot;);
   PrintWriter out = response.getWriter();
   out.println(&quot;&lt;html&gt;&quot;);
   out.println(&quot;&lt;head&gt;&quot;);
   out.println(&quot;&lt;title&gt;&quot; + title + &quot;&lt;/title&gt;&quot;);
   out.println(&quot;&lt;/head&gt;&quot;);
   out.println(&quot;&lt;body bgcolor=\&quot;white\&quot;&gt;&quot;);</pre>
<pre>   // icone per visualizzare codice o ritornare al menu'
   &lt; omissis &gt;


   out.println(&quot;&lt;h3&gt;&quot; + title + &quot;&lt;/h3&gt;&quot;);
   Cookie[] cookies = request.getCookies();
   if ((cookies != null) &amp;&amp; (cookies.length &gt; 0)) 
   {
     out.println(&quot;Il tuo browser ha settato i seguenti cookies &lt;br&gt;&lt;br&gt;&quot;);
     for (int i = 0; i &lt; cookies.length; i++) {
       Cookie cookie = cookies[i];
       out.print (&quot;Nome&amp;nbsp Cookie : &quot; + (cookie.getName())+ &quot;&lt;br&gt;&quot;);
       out.println(&quot;Valore Cookie : &quot;+ (cookie.getValue())+ &quot;&lt;br&gt;&lt;br&gt;&quot;);
     }
   } 
   else 
   {
     out.println(&quot;non ci sono cookies settati nel tuo browser&quot;);
   }</pre>
<pre>   if (aCookie != null) 
   {
     out.println(&quot;&lt;P&gt;&quot;);
     out.println(&quot;Questo &egrave; l'ultimo cookie che hai settato:&lt;br&gt;&lt;br&gt;&quot;);
     out.print(&quot;Nome&amp;nbsp Cookie : &quot; + (nomeCookie) + &quot;&lt;br&gt;&quot;);
     out.print(&quot;Valore Cookie : &quot; + (valoreCookie));
   }
   
   out.println(&quot;&lt;P&gt;&quot;);
   out.println(&quot;Crea un cookie sul tuo browser :&lt;br&gt;&quot;);
   out.print(&quot;&lt;form action=\&quot;&quot;);
   out.println(&quot;Cookie1\&quot; method=POST&gt;&quot;);
   out.print(&quot;Nome&amp;nbsp Cookie: &quot;);
   out.println(&quot;&lt;input type=text length=20 name=nomeCookie&gt;&lt;br&gt;&quot;);
   out.print(&quot;Valore Cookie: &quot;);
   out.println(&quot;&lt;input type=text length=20 name=valoreCookie&gt;&lt;br&gt;&quot;);
   out.println(&quot;&lt;input type=submit&gt;&lt;/form&gt;&quot;);
   out.println(&quot;&lt;/body&gt;&quot;);
   out.println(&quot;&lt;/html&gt;&quot;);
 }</pre>
<pre> public void doPost(HttpServletRequest request, HttpServletResponse response)
 throws IOException, ServletException
 {
   doGet(request, response);
 }
}
 </pre>
</body>
</html>

<html>
<head> 
<title>Esempio con più livelli</title> 
<!-- nel caso a: con librerie scaricate nella cartella leaflet--> 
<link rel="stylesheet" href="leaflet/leaflet.css"> 
<script src="leaflet/leaflet.js" ></script> 
<style>
  #miaMappa { 
    height: 500px;
    width: 500px;
  }
</style>
</head>
<body>
<h3>Mappa con quattro livelli</h3>
<!-- contenitore della mappa -->
<div id="miaMappa"> </div>
<script>
  var miaMappa = L.map('miaMappa').setView([45.8009, 9.0885], 13); // coordinate di Como 
  // mappa primo strato
  var OSM_layer =L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>'
  });
  // mappa secondo strato
   var Stamen_Terrain = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.{ext}', { attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
     subdomains: 'abcd', minZoom: 0,  maxZoom: 18, ext: 'png'
  });
  // mappa terzo strato
  var Stamen_Watercolor = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}', {  attribution: 'Map tiles by <a href="http://stamen.com">Stamen Des  ign</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    subdomains: 'abcd',  minZoom: 1,  maxZoom: 16,  ext: 'jpg'
  });
  // layer trasparente di etichette
  var CartoDB_label = L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}.png', { attribution: '&copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
  })

  // array delle mappe 
  var sceltaMappe = {
    "OSM": OSM_layer,
    "Terrain": Stamen_Terrain,
    "Watercolor": Stamen_Watercolor
  };
  // array dei layer trasparenti
  var sceltaNomi = {
    "Nomi": CartoDB_label
  };
  
  // carico la mappa base di default
  OSM_layer.addTo(miaMappa);
  // attivo il selettore di layers
  L.control.layers(sceltaMappe, sceltaNomi).addTo(miaMappa);

  // definizione immagine/icona per il marker
  var uomo_red = L.icon({
    iconUrl: 'img/ominoR1.png', // posizione
    iconSize: [32, 32],         // dimensioni
  });
  var spillo = L.icon({
    iconUrl: 'img/pin2.png',   // posizione
    iconSize: [32, 32],        // dimensioni
  });
  // definizione e aggiunta dei markers  
  var marker1 = L.marker([45.8250, 9.0960]).addTo(miaMappa);
  var marker2 = L.marker([45.7820, 9.0950], {icon: uomo_red}).addTo(miaMappa);
  var marker3 = L.marker([45.8133, 9.0800], {icon: spillo}).addTo(miaMappa);
</script>
 
</body>
</html>

 